<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ì •í‘œ - S25016 í€ì¹˜ë¦¬ìŠ¤íŠ¸</title>

    <link rel="stylesheet" href="../../shared/styles/variables.css">
    <link rel="stylesheet" href="../../shared/styles/reset.css">
    <link rel="stylesheet" href="../../shared/styles/components.css">

    <style>
        :root {
            --gantt-row-height: 64px;
        }

        body {
            background: var(--color-gray-100);
            min-height: 100vh;
            padding: var(--space-6);
        }

        .page {
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            background: var(--color-white);
            padding: var(--space-8);
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-lg);
            margin-bottom: var(--space-6);
        }

        .page-header h1 {
            font-size: var(--font-3xl);
            color: var(--color-gray-900);
            margin-bottom: var(--space-2);
        }

        .page-header p {
            color: var(--color-gray-600);
            margin-bottom: var(--space-4);
        }

        .header-actions {
            display: flex;
            gap: var(--space-3);
            flex-wrap: wrap;
        }

        .header-actions a {
            text-decoration: none;
            padding: var(--space-2) var(--space-4);
            border-radius: var(--border-radius-full);
            font-weight: var(--font-semibold);
            color: var(--color-white);
            background: var(--color-primary);
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
        }

        .filters-card {
            background: var(--color-white);
            padding: var(--space-6);
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .filter-group label {
            font-size: var(--font-sm);
            font-weight: var(--font-semibold);
            color: var(--color-gray-700);
        }

        .filter-group select,
        .filter-group input {
            border: 1px solid var(--color-gray-300);
            border-radius: var(--border-radius-base);
            padding: var(--space-2) var(--space-3);
            font-size: var(--font-base);
        }

        .filter-actions {
            margin-top: var(--space-4);
            display: flex;
            gap: var(--space-3);
            flex-wrap: wrap;
        }

        .btn {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--border-radius-full);
            border: none;
            font-weight: var(--font-semibold);
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }

        .btn-primary {
            background: var(--color-primary);
            color: var(--color-white);
        }

        .btn-secondary {
            background: var(--color-gray-100);
            color: var(--color-gray-800);
        }

        .view-card {
            background: var(--color-white);
            border-radius: var(--border-radius-xl);
            box-shadow: var(--shadow-lg);
            margin-bottom: var(--space-6);
            overflow: hidden;
        }

        .view-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--color-gray-100);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-4);
            flex-wrap: wrap;
        }

        .view-header h2 {
            font-size: var(--font-xl);
            color: var(--color-gray-900);
        }

        .view-header p {
            color: var(--color-gray-500);
        }

        .meta-chips {
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .meta-chip {
            background: var(--color-gray-100);
            padding: var(--space-1) var(--space-3);
            border-radius: var(--border-radius-full);
            font-size: var(--font-sm);
            color: var(--color-gray-700);
        }

        .meta-chip strong {
            color: var(--color-gray-900);
            margin-left: var(--space-1);
        }

        .meta-chip.warning {
            background: #fef3c7;
            color: #92400e;
        }

        .gantt-wrapper {
            padding: var(--space-6);
        }

        .gantt-axis {
            display: grid;
            grid-auto-flow: column;
            gap: 0;
            border-bottom: 1px solid var(--color-gray-200);
            margin-bottom: var(--space-4);
            font-size: var(--font-xs);
            color: var(--color-gray-500);
            text-align: center;
        }

        .gantt-axis span {
            padding-bottom: var(--space-2);
            border-right: 1px dashed var(--color-gray-200);
        }

        .gantt-axis span:last-child {
            border-right: none;
        }

        .gantt-body {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .gantt-row {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: var(--space-4);
            align-items: center;
        }

        .gantt-row-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .gantt-row-info h3 {
            font-size: var(--font-md);
            color: var(--color-gray-900);
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
        }

        .gantt-row-info .meta {
            font-size: var(--font-sm);
            color: var(--color-gray-500);
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .gantt-bar-track {
            position: relative;
            height: var(--gantt-row-height);
            border-radius: var(--border-radius-lg);
            background: var(--color-gray-100);
            overflow: hidden;
        }

        .gantt-bar {
            position: absolute;
            top: 10px;
            height: calc(var(--gantt-row-height) - 20px);
            border-radius: var(--border-radius-lg);
            color: var(--color-white);
            font-size: var(--font-xs);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            padding: 4px 8px;
            box-shadow: var(--shadow-md);
            transition: transform 0.2s ease;
            min-width: 8%;
            cursor: pointer;
            overflow: visible;
        }

        .gantt-bar:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            z-index: 10;
        }

        /* ê°€ë…ì„± ê°œì„ : ìš°ì„ ìˆœìœ„ë³„ ê°„íŠ¸ ë°” ìƒ‰ìƒ */
        .gantt-bar.priority-ê¸´ê¸‰ {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            border: 2px solid #7f1d1d;
            font-weight: bold;
        }

        .gantt-bar.priority-ë†’ìŒ {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: 2px solid #b45309;
        }

        .gantt-bar.priority-ë³´í†µ {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border: 2px solid #1d4ed8;
        }

        .gantt-bar.priority-ë‚®ìŒ {
            background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
            border: 2px solid #4b5563;
        }

        /* ê°„íŠ¸ ë°” ë‚´ë¶€ ì •ë³´ */
        .bar-content {
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 600;
            font-size: 11px;
            width: 100%;
        }

        .bar-priority-icon {
            font-size: 14px;
        }

        .bar-id {
            font-family: 'Consolas', monospace;
            opacity: 0.9;
            font-size: 10px;
        }

        .bar-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .bar-meta {
            font-size: 9px;
            opacity: 0.85;
            display: flex;
            gap: 6px;
        }

        .gantt-bar::after {
            content: attr(data-range);
            position: absolute;
            bottom: -20px;
            right: 0;
            font-size: var(--font-2xs);
            color: var(--color-gray-600);
        }

        /* ===== Week 3: ê°„íŠ¸ ì°¨íŠ¸ ê·¸ë£¹í•‘ ===== */
        .group-controls {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .group-controls label {
            font-size: var(--font-sm);
            font-weight: var(--font-semibold);
            color: var(--color-gray-700);
        }

        .group-controls select {
            padding: var(--space-2) var(--space-3);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--border-radius-base);
            font-size: var(--font-sm);
        }

        .gantt-group {
            margin-bottom: var(--space-6);
        }

        .gantt-group-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-4) var(--space-5);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--border-radius-lg);
            margin-bottom: var(--space-3);
            cursor: pointer;
            transition: all 0.2s;
            color: white;
        }

        .gantt-group-header:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .gantt-group-header.collapsed {
            margin-bottom: 0;
            border-radius: var(--border-radius-lg);
        }

        .gantt-group-title {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-size: var(--font-lg);
            font-weight: var(--font-bold);
        }

        .gantt-group-toggle {
            font-size: 18px;
            transition: transform 0.2s;
        }

        .gantt-group-header.collapsed .gantt-group-toggle {
            transform: rotate(-90deg);
        }

        .gantt-group-stats {
            display: flex;
            gap: var(--space-4);
            font-size: var(--font-sm);
        }

        .group-stat {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            padding: var(--space-1) var(--space-2);
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-base);
        }

        .group-stat-value {
            font-weight: var(--font-bold);
        }

        .gantt-group-body {
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }

        .gantt-group-body.collapsed {
            max-height: 0 !important;
            opacity: 0;
        }

        /* ë¼ì¸ë³„ ê·¸ë£¹ ìƒ‰ìƒ */
        .gantt-group-header.group-Aë¼ì¸ {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .gantt-group-header.group-Bë¼ì¸ {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gantt-group-header.group-ê³µí†µ {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
        }

        /* ìš°ì„ ìˆœìœ„ë³„ ê·¸ë£¹ ìƒ‰ìƒ */
        .gantt-group-header.group-ê¸´ê¸‰ {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
        }

        .gantt-group-header.group-ë†’ìŒ {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gantt-group-header.group-ë³´í†µ {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }

        .gantt-group-header.group-ë‚®ìŒ {
            background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
        }

        .week-controls {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .week-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(120px, 1fr));
            gap: var(--space-3);
            padding: var(--space-6);
        }

        .day-column {
            background: var(--color-gray-50);
            border-radius: var(--border-radius-lg);
            display: flex;
            flex-direction: column;
            min-height: 220px;
        }

        .day-header {
            padding: var(--space-3);
            border-bottom: 1px solid var(--color-gray-200);
        }

        .day-header strong {
            display: block;
            color: var(--color-gray-900);
        }

        .day-header span {
            font-size: var(--font-sm);
            color: var(--color-gray-500);
        }

        .day-list {
            padding: var(--space-3);
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
            flex: 1;
        }

        .day-card {
            background: var(--color-white);
            border-radius: var(--border-radius-base);
            padding: var(--space-3);
            border-left: 4px solid var(--color-primary);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: var(--transition-base);
        }

        .day-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .day-card.day-card-empty {
            cursor: default;
            border-left-color: var(--color-gray-200);
        }

        .day-card.day-card-empty:hover {
            transform: none;
            box-shadow: var(--shadow-sm);
        }

        .day-card-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-2);
        }

        .day-card-title {
            font-size: var(--font-sm);
            font-weight: var(--font-semibold);
            color: var(--color-gray-900);
            flex: 1;
        }

        .status-pill {
            font-size: var(--font-2xs);
            padding: 0 var(--space-2);
            border-radius: var(--border-radius-full);
            font-weight: var(--font-semibold);
            border: 1px solid var(--color-gray-300);
        }

        .day-card-meta {
            font-size: var(--font-xs);
            color: var(--color-gray-600);
            margin-bottom: 2px;
        }

        .day-card-meta.subtle {
            color: var(--color-gray-500);
        }

        .empty-state {
            text-align: center;
            padding: var(--space-6);
            color: var(--color-gray-500);
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 1024px) {
            .gantt-row {
                grid-template-columns: 1fr;
            }

            .week-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <header class="page-header">
            <h1>ğŸ“… í€ì¹˜ë¦¬ìŠ¤íŠ¸ ì¼ì •í‘œ</h1>
            <p>ì „ì²´ ì´ìŠˆë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê°„íŠ¸ íƒ€ì„ë¼ì¸ê³¼ ì£¼ê°„ ìº˜ë¦°ë”ë¥¼ í•¨ê»˜ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="header-actions">
                <a href="../index.html">â† ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
                <a href="list.html">ğŸ“‹ ì´ìŠˆ ëª©ë¡ ë³´ê¸°</a>
            </div>
        </header>

        <section class="filters-card">
            <div class="filters-grid">
                <div class="filter-group">
                    <label for="searchInput">ê²€ìƒ‰</label>
                    <input type="text" id="searchInput" placeholder="ID, ì œëª©, ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰">
                </div>
                <div class="filter-group">
                    <label for="categoryFilter">ë¶„ë¥˜</label>
                    <select id="categoryFilter">
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="subcategoryFilter">ì„¸ë¶€ë¶„ë¥˜</label>
                    <select id="subcategoryFilter" disabled>
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="statusFilter">ìƒíƒœ</label>
                    <select id="statusFilter">
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="priorityFilter">ìš°ì„ ìˆœìœ„</label>
                    <select id="priorityFilter">
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="ownerFilter">ë‹´ë‹¹ì</label>
                    <select id="ownerFilter">
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="lineFilter">ë¼ì¸/ì„¤ë¹„</label>
                    <select id="lineFilter">
                        <option value="all">ì „ì²´</option>
                    </select>
                </div>
            </div>
            <div class="filter-actions">
                <button class="btn btn-secondary" id="resetFilters">í•„í„° ì´ˆê¸°í™”</button>
            </div>
        </section>

        <section class="view-card">
            <div class="view-header">
                <div>
                    <h2>ê°„íŠ¸ íƒ€ì„ë¼ì¸</h2>
                    <p id="timelineRangeLabel">ê¸°ê°„ ê³„ì‚° ì¤‘...</p>
                </div>
                <div class="meta-chips">
                    <span class="meta-chip">í‘œì‹œ ê±´ìˆ˜<strong id="issueCount">0</strong></span>
                    <span class="meta-chip warning">ì§€ì—°<strong id="overdueCount">0</strong></span>
                </div>
            </div>
            <div class="gantt-wrapper">
                <!-- ê·¸ë£¹í•‘ ì»¨íŠ¸ë¡¤ -->
                <div class="group-controls">
                    <label for="groupBySelect">ğŸ“Š ê·¸ë£¹ ê¸°ì¤€:</label>
                    <select id="groupBySelect">
                        <option value="none">ê·¸ë£¹ ì—†ìŒ</option>
                        <option value="line">ë¼ì¸ë³„</option>
                        <option value="owner">ë‹´ë‹¹ìë³„</option>
                        <option value="priority">ìš°ì„ ìˆœìœ„ë³„</option>
                        <option value="status">ìƒíƒœë³„</option>
                    </select>
                    <button class="btn btn-secondary btn-sm" id="expandAllGroups">ëª¨ë‘ í¼ì¹˜ê¸°</button>
                    <button class="btn btn-secondary btn-sm" id="collapseAllGroups">ëª¨ë‘ ì ‘ê¸°</button>
                </div>

                <div id="ganttLoading" class="empty-state">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
                <div id="ganttEmpty" class="empty-state hidden">ì¡°ê±´ì— ë§ëŠ” ì´ìŠˆê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                <div class="gantt-axis" id="ganttAxis"></div>
                <div class="gantt-body" id="ganttBody"></div>
            </div>
        </section>

        <section class="view-card">
            <div class="view-header">
                <div>
                    <h2>ì£¼ê°„ ìº˜ë¦°ë”</h2>
                    <p>ì„ íƒëœ ì£¼ê°„ ì¼ì •ìœ¼ë¡œ ë‹´ë‹¹ìì™€ ë¼ì¸ ê³„íšì„ í™•ì¸í•˜ì„¸ìš”.</p>
                </div>
                <div class="week-controls">
                    <button class="btn btn-secondary" id="prevWeek">â† ì´ì „ ì£¼</button>
                    <strong id="weekRangeLabel"></strong>
                    <button class="btn btn-secondary" id="nextWeek">ë‹¤ìŒ ì£¼ â†’</button>
                    <button class="btn btn-primary" id="resetWeek">ì´ë²ˆ ì£¼</button>
                </div>
            </div>
            <div id="weekLoading" class="empty-state">ì£¼ê°„ ë°ì´í„°ë¥¼ ì¤€ë¹„í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>
            <div id="weekEmpty" class="empty-state hidden">í•´ë‹¹ ì£¼ê°„ì— í‘œì‹œí•  ì´ìŠˆê°€ ì—†ìŠµë‹ˆë‹¤.</div>
            <div class="week-grid" id="weekGrid"></div>
        </section>
    </div>

    <script src="../scripts/punchlist.js"></script>
    <script src="../scripts/schedule.js"></script>
</body>
</html>
