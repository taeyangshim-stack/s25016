# ROBOT↔UI 테스트 이슈 분석

작성일: 2025-10-03  
작성자: 에이전트  
위치: 250917_상하축이슈/01_문제점분석

## 요약
- 범주: 이동/리미트, 안전/근접, 속도/배율, 에러처리, 와이어/유지보수, UI/용어, 시뮬레이션 정합
- 우선순위: 충돌 예방, 리미트/알람 신뢰성, 에러 핸들링 일관성

---

## A. 이동/리미트/충돌
1) [A-1] 이동 범위 초과 시 에러 처리 세분화 필요  
- 현상: 리미트 초과 시 동작 불가 확인되나 알람의 분류/원인 가시성 낮음(축/방향/종류 구분 미흡)  
- 가설: 컨트롤러 알람코드 매핑 미흡 또는 UI 변환 로직 단순화  
- 제안: 알람코드 → UI 레벨/메시지 매핑테이블 도입, 축/방향 파라미터 표시  
- 참고: 체크리스트 항목 “이동 범위 초과 시 에러 처리”

2) [A-2] r축 충돌 위험: y축 위치 의존 리미트 필요  
- 현상: 통로/포스트 엔드단에서 r축 회전 시 충돌 가능성  
- 가설: 작업공간 모델의 축간 의존(soft-limit surface) 미정의  
- 제안: y→r 허용범위 함수/룩업테이블 적용, 사전 경로검증과 연동  
- 데이터: 과거 충돌 근접 로그 필요

3) [A-3] 이동 전 충돌 검사 동작 안함(코드 꼬임)  
- 현상: 경로 사전검증 로직 비활성/예외로 중단  
- 추정원인: 비동기 상태경합 또는 캐시 파라미터 불일치  
- 증빙: 스택트레이스/비활성 플래그 확인 필요  
- 조치: 단위테스트 케이스 분리, 경로벡터 입력 유효성 및 공간인덱스 초기화 시점 점검

4) [A-4] 갠트리 간 근접 상황 UI 알람 미표시  
- 현상: 리미트로 동작은 정지되나 UI 경고 없음  
- 원인가설: 안전PLC/컨트롤러 이벤트가 UI로 브로드캐스트되지 않음  
- 조치: 이벤트 버스 구독/디바운스 추가, 알람 패널와 토스트 동시 표기

---

## B. 안전/근접 DB
1) [B-1] X축 안전 근접거리 DB 관리 미정의  
- 현상: 파라미터 저장/검증/버전이력 기준 불명확  
- 제안: 스키마(제품/영역/상태/개정), 범위검증, CRC/버전 도입, 변경이력 로그  
- 추가: 오프라인 JSON 스냅샷 내보내기/불러오기 기능

---

## C. 속도/배율/파라미터
1) [C-1] 와이어 절단 모션 속도 UI↔RAPID 동기화 필요  
- 현상: UI 확인 필요, 컨트롤러 측 파라미터 조치 요구  
- 제안: 양방향 읽기/쓰기 및 단위 변환 통일, 적용전 미리보기/검증

2) [C-2] 드라이런 속도 배율 설정  
- 현상: UI 동작 확인 필요  
- 제안: 0.1~1.0 배율 슬라이더, 실시간 반영/표시, 모션로그에 배율 기록

3) [C-3] 데이터 값 입력 후 설정 개선  
- 현상: 입력 검증/가이드 미흡  
- 제안: 인라인 검증(범위/단위/상호의존성), 오류 힌트, 기본값 복원

---

## D. 에러 핸들링/재시도
1) [D-1] 용접 진입/터치 에러 재시도 후 처리  
- 일정: 10/09 우선 대응  
- 제안: 재시도 N회 정책, 백오프, 실패 시 안전복귀/알람/로그 표준화  
- 추가: 에러코드 카테고리와 사용자 액션 가이드 연결

2) [D-2] 아크에러 시 인근부재 최대높이 전달  
- 상태: 10/09 이후 보류  
- 제안: 근접부재 스캔/DB 조회 결합, 최대높이 기반 회피경로 재계산

---

## E. 와이어/유지보수
1) [E-1] 와이어(보수) 교체 모드 변수 덮어쓰기  
- 현상: 상태머신 전이 시 변수 오염 가능성  
- 제안: 불변 파라미터 캡처, 단계별 검증, UI 바인딩 범위 제한

2) [E-2] 개별 로봇 와이어 커팅  
- 상태: 동작 확인  
- 제안: 보호구간/인터락 체크리스트 자동화

---

## F. UI/표기/시뮬레이션 정합
1) [F-1] 수동조작 모드 가시성 + 방향/용어 표준화  
- 제안: 상태바/툴팁/가이드 오버레이, 용어집(포스트/통로/시계/반시계) 고정

2) [F-2] 수동 이동 UI: 제한 범위 표시  
- 제안: 작업공간/금지구역 오버레이, 모션 중 실시간 갱신

3) [F-3] 시뮬레이션 vs 실제 작동 상이  
- 현상: 일부 모션 불일치  
- 제안: 동기화 기준 정의(좌표계/가감속/속도 한계), 트레이스 비교 툴

---

## 다음 단계(To-Do)
- [ ] 충돌 검사 비활성 원인 추적(A-3): 로그/스택 수집 → 최소 재현 작성
- [ ] 리미트 알람 매핑 테이블 설계(A-1) 초안 → UI 반영
- [ ] X축 안전거리 DB 스키마 초안(B-1) 작성 및 검증 로직 설계
- [ ] 드라이런 배율(슬라이더+표시) UI 프로토타입(C-2)
- [ ] 에러 재시도 정책(D-1) 설계서 초안 작성(10/09)

## 참조
- 테스트 체크리스트: `../04_작업진행/251003_에이전트_ROBOT-UI_테스트체크리스트.md`
- 대시보드: `/상하축이슈_대시보드.html`

