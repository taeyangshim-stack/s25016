<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê·¼ë¬´ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ - S25016</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .nav-btn {
            padding: 20px;
            background: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            color: #333;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .nav-btn .icon {
            font-size: 28px;
        }

        .nav-btn .text {
            flex: 1;
        }

        .nav-btn .title {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .nav-btn .desc {
            font-size: 12px;
            color: #666;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .stat-card .label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-card .unit {
            font-size: 16px;
            color: #999;
            margin-left: 5px;
        }

        .recent-records {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .recent-records h2 {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
        }

        .record-table {
            width: 100%;
            border-collapse: collapse;
        }

        .record-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-size: 14px;
            color: #666;
            border-bottom: 2px solid #e0e0e0;
        }

        .record-table td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
        }

        .record-table tr:hover {
            background: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .badge.check-in {
            background: #d4edda;
            color: #155724;
        }

        .badge.check-out {
            background: #f8d7da;
            color: #721c24;
        }

        .badge.both {
            background: #d1ecf1;
            color: #0c5460;
        }

        .no-data {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .back-link {
            text-align: center;
            margin-top: 30px;
        }

        .back-link a {
            color: #667eea;
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
        }

        .back-link a:hover {
            text-decoration: underline;
        }

        .info-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .info-box h3 {
            color: #856404;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #856404;
            font-size: 14px;
            line-height: 1.6;
        }

        .info-box a {
            color: #667eea;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .record-table {
                font-size: 12px;
            }

            .record-table th,
            .record-table td {
                padding: 8px 4px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ­ ê·¼ë¬´ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>
            <p>S25016 í”„ë¡œì íŠ¸ í˜„ì¥ ì¶œì… ë° ê·¼ë¬´ ì‹œê°„ ê´€ë¦¬</p>
        </div>

        <div id="setupInfo" class="info-box" style="background: #d4edda; border-color: #c3e6cb;">
            <h3 style="color: #155724;">âœ… Google Sheets ë™ê¸°í™” êµ¬í˜„ ì™„ë£Œ!</h3>
            <p style="color: #155724;">
                PCì™€ ëª¨ë°”ì¼ ê°„ ì‹¤ì‹œê°„ ë™ê¸°í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
                <a href="ì„¤ì •ê°€ì´ë“œ_ë™ê¸°í™”êµ¬í˜„.html">ğŸ“˜ ì„¤ì • ë°©ë²• ë³´ê¸°</a> ë¥¼ ì°¸ê³ í•˜ì—¬ Google Apps Scriptë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
            </p>
        </div>

        <div class="nav-buttons">
            <a href="ì…ë ¥.html" class="nav-btn">
                <span class="icon">ğŸ“</span>
                <div class="text">
                    <div class="title">ì¶œì… ê¸°ë¡</div>
                    <div class="desc">ì¶œí‡´ê·¼ ì‹œê°„ ì…ë ¥</div>
                </div>
            </a>
            <a href="ì¡°íšŒ.html" class="nav-btn">
                <span class="icon">ğŸ“Š</span>
                <div class="text">
                    <div class="title">ê¸°ë¡ ì¡°íšŒ</div>
                    <div class="desc">ë‚ ì§œë³„/ì¸ì›ë³„ ì¡°íšŒ</div>
                </div>
            </a>
            <a href="ì„¤ì •.html" class="nav-btn">
                <span class="icon">ğŸ‘¥</span>
                <div class="text">
                    <div class="title">ì¸ì›/ì¥ì†Œ ì„¤ì •</div>
                    <div class="desc">ì¶œì… ì¸ì› ë° ì¥ì†Œ ê´€ë¦¬</div>
                </div>
            </a>
            <a href="ì¼ê´„ê´€ë¦¬.html" class="nav-btn">
                <span class="icon">ğŸ“‹</span>
                <div class="text">
                    <div class="title">ì¼ê´„ ê´€ë¦¬</div>
                    <div class="desc">í•œ ë²ˆì— ì—¬ëŸ¬ ê¸°ë¡ ê´€ë¦¬</div>
                </div>
            </a>
            <a href="ì„¤ì •ê°€ì´ë“œ_ë™ê¸°í™”êµ¬í˜„.html" class="nav-btn">
                <span class="icon">âœ…</span>
                <div class="text">
                    <div class="title">ë™ê¸°í™” ì„¤ì •</div>
                    <div class="desc">PC/ëª¨ë°”ì¼ ë™ê¸°í™” êµ¬í˜„ ì™„ë£Œ</div>
                </div>
            </a>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="label">ì˜¤ëŠ˜ í˜„ì¥ ì¸ì›</div>
                <div class="value" id="todayCount">0<span class="unit">ëª…</span></div>
            </div>
            <div class="stat-card">
                <div class="label">ì´ë²ˆ ì£¼ ì¶œì… ê¸°ë¡</div>
                <div class="value" id="weekCount">0<span class="unit">ê±´</span></div>
            </div>
            <div class="stat-card">
                <div class="label">ì´ë²ˆ ë‹¬ ì¶œì… ê¸°ë¡</div>
                <div class="value" id="monthCount">0<span class="unit">ê±´</span></div>
            </div>
            <div class="stat-card">
                <div class="label">ì´ ê¸°ë¡</div>
                <div class="value" id="totalCount">0<span class="unit">ê±´</span></div>
            </div>
        </div>

        <div class="recent-records">
            <h2>ğŸ“… ìµœê·¼ ì¶œì… ê¸°ë¡ (ìµœê·¼ 10ê±´)</h2>
            <table class="record-table" id="recordTable">
                <thead>
                    <tr>
                        <th>ë‚ ì§œ</th>
                        <th>ì¸ì›</th>
                        <th>ìœ„ì¹˜</th>
                        <th>ì…ì‹¤</th>
                        <th>í‡´ì‹¤</th>
                        <th>ì‘ì—…ë‚´ìš©</th>
                        <th>ìƒíƒœ</th>
                    </tr>
                </thead>
                <tbody id="recordTableBody">
                    <tr>
                        <td colspan="7" class="no-data">
                            ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. "ì¶œì… ê¸°ë¡" ë©”ë‰´ì—ì„œ ê¸°ë¡ì„ ì¶”ê°€í•˜ì„¸ìš”.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="back-link">
            <a href="../index.html">â† S25016 ë©”ì¸ ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
    </div>

    <script>
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê¸°ë¡ ê°€ì ¸ì˜¤ê¸°
        function loadRecords() {
            const records = JSON.parse(localStorage.getItem('workRecords') || '[]');
            return records.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const records = loadRecords();
            const now = new Date();
            const today = now.toISOString().split('T')[0];

            // ì´ë²ˆ ì£¼ ì‹œì‘ì¼ ê³„ì‚°
            const weekStart = new Date(now);
            weekStart.setDate(now.getDate() - now.getDay());
            weekStart.setHours(0, 0, 0, 0);

            // ì´ë²ˆ ë‹¬ ì‹œì‘ì¼
            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);

            // ì˜¤ëŠ˜ í˜„ì¥ ì¸ì› (ì¤‘ë³µ ì œê±°)
            const todayRecords = records.filter(r => r.date === today);
            const todayPeople = new Set(todayRecords.map(r => r.name));
            document.getElementById('todayCount').innerHTML = `${todayPeople.size}<span class="unit">ëª…</span>`;

            // ì´ë²ˆ ì£¼ ì¶œì… ê¸°ë¡
            const weekRecords = records.filter(r => new Date(r.date) >= weekStart);
            document.getElementById('weekCount').innerHTML = `${weekRecords.length}<span class="unit">ê±´</span>`;

            // ì´ë²ˆ ë‹¬ ì¶œì… ê¸°ë¡
            const monthRecords = records.filter(r => new Date(r.date) >= monthStart);
            document.getElementById('monthCount').innerHTML = `${monthRecords.length}<span class="unit">ê±´</span>`;

            // ì´ ê¸°ë¡
            document.getElementById('totalCount').innerHTML = `${records.length}<span class="unit">ê±´</span>`;
        }

        // í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateTable() {
            const records = loadRecords();
            const tbody = document.getElementById('recordTableBody');

            if (records.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="no-data">
                            ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤. "ì¶œì… ê¸°ë¡" ë©”ë‰´ì—ì„œ ê¸°ë¡ì„ ì¶”ê°€í•˜ì„¸ìš”.
                        </td>
                    </tr>
                `;
                return;
            }

            // ìµœê·¼ 10ê±´ë§Œ í‘œì‹œ
            const recentRecords = records.slice(0, 10);

            tbody.innerHTML = recentRecords.map(record => {
                let statusBadge = '';
                if (record.checkIn !== '-' && record.checkOut !== '-') {
                    statusBadge = '<span class="badge both">ì™„ë£Œ</span>';
                } else if (record.checkIn !== '-') {
                    statusBadge = '<span class="badge check-in">ì¶œê·¼</span>';
                } else {
                    statusBadge = '<span class="badge check-out">í‡´ê·¼</span>';
                }

                return `
                    <tr>
                        <td>${record.date}</td>
                        <td>${record.name}</td>
                        <td>${record.location}</td>
                        <td>${record.checkIn}</td>
                        <td>${record.checkOut}</td>
                        <td>${record.workType}</td>
                        <td>${statusBadge}</td>
                    </tr>
                `;
            }).join('');
        }

        // ì„¤ì • ì•ˆë‚´ í‘œì‹œ ì—¬ë¶€
        function checkSetup() {
            const setupInfo = document.getElementById('setupInfo');
            // Google Sheets URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì•ˆë‚´ í‘œì‹œ
            // ì‹¤ì œë¡œëŠ” ì…ë ¥.htmlì˜ SCRIPT_URLì„ í™•ì¸í•´ì•¼ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ ì²˜ë¦¬
            const hasRecords = loadRecords().length > 0;
            if (hasRecords) {
                setupInfo.style.display = 'block';
            }
        }

        // ì´ˆê¸° ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            updateTable();
            checkSetup();

            // 1ë¶„ë§ˆë‹¤ ê°±ì‹ 
            setInterval(() => {
                updateStats();
                updateTable();
            }, 60000);
        });
    </script>
</body>
</html>
