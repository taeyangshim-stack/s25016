<!DOCTYPE html>
<html>
<head><meta charset="utf-8"></head>
<body style="font-family:'맑은 고딕','Malgun Gothic',sans-serif; font-size:10pt; color:#333; line-height:1.7; max-width:800px; margin:0 auto;">

<div style="border-bottom:3px solid #1a5276; padding-bottom:10px; margin-bottom:20px;">
  <h2 style="color:#1a5276; margin:0;">[S25016] PlanB v1.9.52 — ArcL 용접 구현 완료 및 검증 요청 (2026.02.23)</h2>
</div>

<table style="width:100%; border-collapse:collapse; margin-bottom:20px; font-size:9.5pt;">
  <tr><td style="width:60px; padding:4px 8px; background:#f0f4f8; font-weight:bold;">수신</td><td style="padding:4px 8px;">삼성중공업 담당자님, 이마룬 사원</td></tr>
  <tr><td style="padding:4px 8px; background:#f0f4f8; font-weight:bold;">참조</td><td style="padding:4px 8px;">GR자동화, 디파인시스템</td></tr>
  <tr><td style="padding:4px 8px; background:#f0f4f8; font-weight:bold;">발신</td><td style="padding:4px 8px;">심태양 / 에스피시스템스</td></tr>
  <tr><td style="padding:4px 8px; background:#f0f4f8; font-weight:bold;">일자</td><td style="padding:4px 8px;">2026년 2월 23일</td></tr>
</table>

<p>안녕하십니까, 에스피시스템스 심태양입니다.</p>
<p>2/22 보고에 이어, PlanB RAPID 프로그램의 <b>ArcL 용접 구현(v1.9.52)</b> 및 가상축 검토 결과를 보고드립니다.<br>
금번 보고에는 <b style="color:#c0392b;">C팀 확인이 필요한 기술적 사항</b>이 포함되어 있으니 검토 부탁드립니다.</p>

<!-- ========== 1. 진행 현황 요약 ========== -->
<h3 style="color:#1a5276; border-left:4px solid #1a5276; padding-left:10px; margin-top:30px;">1. 진행 현황 요약</h3>

<table style="width:100%; border-collapse:collapse; margin:10px 0; font-size:9pt;">
  <tr style="background:#1a5276; color:#fff;">
    <th style="padding:6px 10px; text-align:left; width:100px;">버전</th>
    <th style="padding:6px 10px; text-align:left;">내용</th>
    <th style="padding:6px 10px; text-align:center; width:80px;">상태</th>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd;">v2.0.1~v2.0.2</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">Robot2 TCP 488mm 오프셋 수정 (CalcCurrentTcp)</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#1a7a2e; font-weight:bold;">완료</td>
  </tr>
  <tr>
    <td style="padding:5px 10px; border:1px solid #ddd;">v1.9.49</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">Non-home 갠트리 위치 초기화 수정</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#1a7a2e; font-weight:bold;">완료</td>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd;">v1.9.50</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">TestInitNonHome 자동화 테스트 추가 (4시나리오)</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#1a7a2e; font-weight:bold;">완료</td>
  </tr>
  <tr>
    <td style="padding:5px 10px; border:1px solid #ddd;">v1.9.51</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">R!=0 로봇 자세 이상 수정 (CRobT 오리엔테이션)</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#1a7a2e; font-weight:bold;">완료</td>
  </tr>
  <tr style="background:#e8f8f5; border:2px solid #1abc9c;">
    <td style="padding:5px 10px; border:1px solid #1abc9c; font-weight:bold;">v1.9.52</td>
    <td style="padding:5px 10px; border:1px solid #1abc9c; font-weight:bold;">ArcLStart/ArcL/ArcLEnd 용접 구현 (금번)</td>
    <td style="padding:5px 10px; border:1px solid #1abc9c; text-align:center; color:#e67e22; font-weight:bold;">RobotStudio 검증 필요</td>
  </tr>
</table>

<!-- ========== 2. v1.9.52 ArcL 구현 상세 ========== -->
<h3 style="color:#1a5276; border-left:4px solid #1a5276; padding-left:10px; margin-top:30px;">2. v1.9.52 — ArcL 용접 구현 상세</h3>

<p style="font-size:9.5pt;">TraceWeldLine()의 <code>WELD_ARC_ENABLED=TRUE</code> 분기를 기존 MoveL 스텁에서 <b>실제 ArcLStart/ArcL/ArcLEnd 호출</b>로 교체하였습니다.</p>

<!-- 2-1. BuildArcParams -->
<div style="background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; padding:15px; margin:15px 0;">
  <h4 style="color:#2471a3; margin:0 0 8px 0;">2-1. 신규 PROC: BuildArcParams</h4>
  <p style="font-size:9pt; margin:5px 0;">상위 시스템이 기록하는 <b>torchmotion</b>(macroStartBuffer1/macroEndBuffer1) → ABB 용접 데이터타입 변환</p>
  <table style="width:100%; border-collapse:collapse; font-size:9pt;">
    <tr style="background:#eaf2f8;">
      <th style="padding:5px 8px; text-align:left; width:160px;">소스 (torchmotion)</th>
      <th style="padding:5px 8px; text-align:center; width:30px;"></th>
      <th style="padding:5px 8px; text-align:left; width:160px;">대상 (ABB 타입)</th>
      <th style="padding:5px 8px; text-align:left;">파라미터</th>
    </tr>
    <tr>
      <td style="padding:4px 8px; border:1px solid #ddd;">macroStartBuffer1{pass}</td>
      <td style="padding:4px 8px; border:1px solid #ddd; text-align:center;">&rarr;</td>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">weld1.weld_heat</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">Voltage(par3), Current(par4), WFS(par6)</td>
    </tr>
    <tr style="background:#f9f9f9;">
      <td style="padding:4px 8px; border:1px solid #ddd;">macroStartBuffer1{pass}</td>
      <td style="padding:4px 8px; border:1px solid #ddd; text-align:center;">&rarr;</td>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">seam1.s_heat</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">시작 V/A/WFS</td>
    </tr>
    <tr>
      <td style="padding:4px 8px; border:1px solid #ddd;">macroEndBuffer1{pass}</td>
      <td style="padding:4px 8px; border:1px solid #ddd; text-align:center;">&rarr;</td>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">seam1.e_heat</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">종료 V/A/WFS (크레이터)</td>
    </tr>
    <tr style="background:#f9f9f9;">
      <td style="padding:4px 8px; border:1px solid #ddd;">macroStartBuffer1{pass}</td>
      <td style="padding:4px 8px; border:1px solid #ddd; text-align:center;">&rarr;</td>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">weave1_rob1</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">Shape, Type, Length, Width, DwellL/R</td>
    </tr>
  </table>
</div>

<!-- 2-2. ArcL 호출 패턴 -->
<div style="background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; padding:15px; margin:15px 0;">
  <h4 style="color:#2471a3; margin:0 0 8px 0;">2-2. ArcL 호출 패턴 (TraceWeldLine 내부)</h4>
  <div style="background:#2c3e50; color:#ecf0f1; padding:12px; border-radius:4px; font-family:Consolas,'Courier New',monospace; font-size:8.5pt; line-height:1.5; overflow-x:auto;">
    <span style="color:#7fb3d3;">BuildArcParams</span> pass; &nbsp;&nbsp;<span style="color:#7f8c8d;">! torchmotion → ABB 파라미터 변환</span><br><br>
    <span style="color:#7fb3d3;">ArcLStart</span> pWeldPosR1{<span style="color:#f39c12;">1</span>}, vWeldSpeed{1}, seam1, weld1\Weave:=weave1_rob1,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;fine, tWeld1\WObj:=WobjFloor; &nbsp;&nbsp;<span style="color:#7f8c8d;">! 아크 시작</span><br><br>
    <span style="color:#95a5a6;">FOR</span> seg <span style="color:#95a5a6;">FROM</span> 2 <span style="color:#95a5a6;">TO</span> nSegs-1 <span style="color:#95a5a6;">DO</span><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#7fb3d3;">ArcL</span> pWeldPosR1{<span style="color:#f39c12;">seg</span>}, vWeldSpeed{seg}, seam1, weld1\Weave:=weave1_rob1,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z1, tWeld1\WObj:=WobjFloor; &nbsp;&nbsp;<span style="color:#7f8c8d;">! 중간 세그먼트 (연속)</span><br>
    <span style="color:#95a5a6;">ENDFOR</span><br><br>
    <span style="color:#7fb3d3;">ArcLEnd</span> pWeldPosR1{<span style="color:#f39c12;">nSegs</span>}, vWeldSpeed{nSegs}, seam1, weld1\Weave:=weave1_rob1,<br>
    &nbsp;&nbsp;&nbsp;&nbsp;fine, tWeld1\WObj:=WobjFloor; &nbsp;&nbsp;<span style="color:#7f8c8d;">! 아크 종료</span>
  </div>
  <p style="font-size:8.5pt; color:#666; margin:8px 0 0 0;">
    &bull; ArcLStart: fine zone (정밀 아크 시작점) &nbsp; &bull; ArcL: z1 zone (연속 경로) &nbsp; &bull; ArcLEnd: fine zone (정밀 아크 종료점)<br>
    &bull; nSegs &lt; 2 시 MoveL 폴백 (방어 코드)
  </p>
</div>

<!-- 2-3. 기존 PlanA 레거시와 비교 -->
<div style="background:#f8f9fa; border:1px solid #dee2e6; border-radius:6px; padding:15px; margin:15px 0;">
  <h4 style="color:#2471a3; margin:0 0 8px 0;">2-3. PlanA 레거시 ArcL 대비 차이점</h4>
  <table style="width:100%; border-collapse:collapse; font-size:9pt;">
    <tr style="background:#eaf2f8;">
      <th style="padding:5px 8px; text-align:left; width:120px;">항목</th>
      <th style="padding:5px 8px; text-align:left;">PlanA (레거시)</th>
      <th style="padding:5px 8px; text-align:left;">PlanB v1.9.52</th>
    </tr>
    <tr>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">좌표계</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">SyncMove + 하드코딩 robtarget</td>
      <td style="padding:4px 8px; border:1px solid #ddd;"><b>WobjFloor</b> + 동적 계산 (pWeldPosR1)</td>
    </tr>
    <tr style="background:#f9f9f9;">
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">용접 파라미터</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">seam1/weld1 초기값 그대로 사용</td>
      <td style="padding:4px 8px; border:1px solid #ddd;"><b>BuildArcParams</b>로 패스별 동적 설정</td>
    </tr>
    <tr>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">세그먼트</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">3~6개 고정</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">nMotionStepCount{1} (최대 40개)</td>
    </tr>
    <tr style="background:#f9f9f9;">
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">멀티패스</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">단일 패스 고정</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">nWeldPassCount (최대 10패스)</td>
    </tr>
    <tr>
      <td style="padding:4px 8px; border:1px solid #ddd; font-weight:bold;">모드 전환</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">항상 ArcL</td>
      <td style="padding:4px 8px; border:1px solid #ddd;">WELD_ARC_ENABLED (FALSE=MoveL, TRUE=ArcL)</td>
    </tr>
  </table>
</div>

<!-- ========== 3. 가상축 검토 결과 ========== -->
<h3 style="color:#1a5276; border-left:4px solid #1a5276; padding-left:10px; margin-top:30px;">3. 가상축(Virtual Axis) 검토 결과 — 비실용적</h3>

<table style="width:100%; border-collapse:collapse; margin:10px 0; font-size:9pt;">
  <tr style="background:#1a5276; color:#fff;">
    <th style="padding:6px 10px; text-align:left; width:80px;">외부축</th>
    <th style="padding:6px 10px; text-align:left; width:120px;">현재 상태</th>
    <th style="padding:6px 10px; text-align:left;">제약</th>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd;">eax_a~d</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">X1, Y, Z, R</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">정상 사용 중 (갠트리 4축)</td>
  </tr>
  <tr>
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold; color:#c0392b;">eax_e</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">LOCKED_EAW_11</td>
    <td style="padding:5px 10px; border:1px solid #ddd; color:#c0392b;">MOC.cfg에서 <b>하드웨어 잠금</b>, 항상 0 — 제어 불가</td>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold; color:#c0392b;">eax_f (X2)</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">Linked Motor</td>
    <td style="padding:5px 10px; border:1px solid #ddd; color:#c0392b;">X1 추종 (듀얼 트랙), 독립 제어 불가 (<b>max 2mm 이내</b>)</td>
  </tr>
</table>

<div style="background:#fdedec; border:1px solid #f5b7b1; border-radius:4px; padding:10px; margin:10px 0; font-size:9.5pt;">
  <b>결론:</b> 가상축 추가는 <b>하드웨어/MOC 변경 없이 불가능</b>합니다.<br>
  현재 공유변수 방식(PERS nRobot1FloorX 등)이 Robot2 좌표 동기화에 적합한 구조이며, 이 방향을 유지합니다.
</div>

<!-- ========== 4. C팀 확인 요청 ========== -->
<h3 style="color:#c0392b; border-left:4px solid #c0392b; padding-left:10px; margin-top:30px;">4. C팀 확인/의견 요청 사항</h3>

<div style="background:#fef9e7; border:2px solid #f9e79f; border-radius:6px; padding:15px; margin:15px 0; font-size:9.5pt;">
  <p style="margin:0 0 10px 0; font-weight:bold; color:#7d6608;">아래 사항에 대해 C팀의 검토 및 의견을 부탁드립니다:</p>
  <ol style="margin:0; padding-left:20px;">
    <li style="margin-bottom:12px;">
      <b style="color:#c0392b;">seamdata/welddata 필드 접근 구문 확인</b><br>
      현재 코드에서 <code>weld1.weld_heat.par3</code>, <code>seam1.s_heat.par4</code> 등으로 접근하고 있습니다.<br>
      ABB ArcWelding 매뉴얼 기준 <b>정확한 필드명</b>이 맞는지 확인 필요합니다.<br>
      <span style="color:#666;">(RobotStudio에서 <code>seam1.</code> 입력 시 자동완성으로 확인 가능)</span><br>
      <span style="color:#666;">특히: par1=Process(MIG=5), par3=Voltage, par4=Current, par6=WireFeedSpeed 매핑이 맞는지</span>
    </li>
    <li style="margin-bottom:12px;">
      <b style="color:#c0392b;">ArcL 호출 시 \WObj:=WobjFloor 사용 가능 여부</b><br>
      PlanA 레거시에서는 ArcL에 <code>\WObj</code> 없이 사용했습니다.<br>
      PlanB에서는 Floor 좌표계 기반이므로 <code>\WObj:=WobjFloor</code>을 붙였는데,<br>
      <b>ArcLStart/ArcL/ArcLEnd에서 \WObj 옵셔널 파라미터를 지원하는지</b> 확인 부탁드립니다.
    </li>
    <li style="margin-bottom:12px;">
      <b style="color:#c0392b;">RobotStudio ArcWelding 옵션 상태</b><br>
      현재 가상 컨트롤러에 <b>ArcWelding PowerPac</b>이 설치되어 있습니까?<br>
      없으면 ArcLStart/ArcL/ArcLEnd 명령어 자체가 에러납니다.<br>
      <span style="color:#666;">Controller → Properties → Installed Options 에서 확인 가능</span>
    </li>
    <li style="margin-bottom:12px;">
      <b style="color:#2471a3;">weavedata 구조 매핑 검증</b><br>
      현재 weave1_rob1에 [Shape, Type, Length, Width, DwellL, DwellR, 0,0,...] 15개 요소를 할당합니다.<br>
      <b>PlanA/PlanC에서 사용 중인 weavedata 초기값</b>과 비교하여 필드 순서가 맞는지 확인 부탁드립니다.
    </li>
    <li style="margin-bottom:12px;">
      <b style="color:#2471a3;">ArcLStart에서 fine zone 사용</b><br>
      계획상 ArcLStart의 zone을 <code>fine</code>으로 설정했습니다. 이는 정밀한 아크 시작점을 위한 것인데,<br>
      PlanA 레거시에서도 <code>fine</code>을 사용하고 있어 동일하게 맞추었습니다.<br>
      <b>실 용접 시 fine이 적절한지, 아니면 z1 등으로 변경이 필요한지</b> 의견 부탁드립니다.
    </li>
  </ol>
</div>

<!-- ========== 5. 다음 스텝 ========== -->
<h3 style="color:#1a5276; border-left:4px solid #1a5276; padding-left:10px; margin-top:30px;">5. 다음 스텝</h3>

<table style="width:100%; border-collapse:collapse; margin:10px 0; font-size:9pt;">
  <tr style="background:#1a5276; color:#fff;">
    <th style="padding:6px 10px; text-align:left; width:30px;">#</th>
    <th style="padding:6px 10px; text-align:left;">항목</th>
    <th style="padding:6px 10px; text-align:left;">내용</th>
    <th style="padding:6px 10px; text-align:center; width:80px;">우선순위</th>
  </tr>
  <tr style="background:#e8f8f5;">
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; font-weight:bold;">1</td>
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold;">RobotStudio ArcL 검증</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">WELD_ARC_ENABLED=TRUE로 전환 후 TestFullWeldSequence 실행, ArcL 동작 확인</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#c0392b; font-weight:bold;">즉시</td>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center;">2</td>
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold;">필드명 검증 후 코드 수정</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">C팀 피드백 반영 — par3/par4/par6 등 정확한 필드명 확정</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center; color:#e67e22; font-weight:bold;">높음</td>
  </tr>
  <tr>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center;">3</td>
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold;">세그먼트별 welddata</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">ConfigModule의 wd1~40, weave1~40 활용 — 세그먼트별 다른 용접조건 적용</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center;">중간</td>
  </tr>
  <tr style="background:#f9f9f9;">
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center;">4</td>
    <td style="padding:5px 10px; border:1px solid #ddd; font-weight:bold;">터치센싱 / 실기 검증</td>
    <td style="padding:5px 10px; border:1px solid #ddd;">현장 적용 전 단계 — ArcL 정상 동작 확인 후 진행</td>
    <td style="padding:5px 10px; border:1px solid #ddd; text-align:center;">향후</td>
  </tr>
</table>

<!-- ========== 맺음 ========== -->
<hr style="border:none; border-top:1px solid #ddd; margin:25px 0;">

<p style="font-size:9.5pt;">
v1.9.52에서 <b>TraceWeldLine의 ArcL 분기를 완전히 구현</b>하였습니다.<br>
WELD_ARC_ENABLED 플래그 전환만으로 시뮬레이션(MoveL)과 실용접(ArcL)을 전환할 수 있습니다.<br>
<b>위 4번 항목의 C팀 확인사항에 대해 회신 부탁드립니다.</b>
</p>

<p style="font-size:9.5pt;">문의사항이 있으시면 말씀 부탁드립니다.<br>감사합니다.</p>

<div style="margin-top:20px; padding-top:10px; border-top:1px solid #ccc; font-size:8.5pt; color:#888;">
  심태양 / 에스피시스템스 개발팀<br>
  taeyang@spsystems.kr
</div>

</body>
</html>