<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[S25016] PlanB RAPID 수정 진행경과 보고 (2/13)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Malgun Gothic', 'Segoe UI', sans-serif;
            background: #f5f7fa;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 820px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a8e 100%);
            color: #fff;
            padding: 24px 28px;
        }
        .header h1 { font-size: 1.25rem; margin-bottom: 6px; letter-spacing: -0.5px; }
        .header .meta { font-size: 0.85rem; color: #8bb8e8; }

        .mail-info {
            background: #f8fafc;
            padding: 14px 28px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 0.88rem;
        }
        .mail-info div { margin: 4px 0; }
        .mail-info label {
            display: inline-block;
            width: 55px;
            font-weight: 600;
            color: #666;
        }

        .content {
            padding: 28px;
            line-height: 1.85;
            font-size: 0.95rem;
        }
        .greeting {
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .section { margin-bottom: 28px; }
        .section-title {
            background: #f0f9ff;
            border-left: 4px solid #2563eb;
            padding: 10px 15px;
            margin-bottom: 14px;
            font-weight: 700;
            color: #1e40af;
            font-size: 1rem;
        }
        .section-title.success {
            background: #f0fdf4;
            border-left-color: #16a34a;
            color: #166534;
        }
        .section-title.warn {
            background: #fffbeb;
            border-left-color: #f59e0b;
            color: #92400e;
        }
        .section-title.plan {
            background: #faf5ff;
            border-left-color: #8b5cf6;
            color: #5b21b6;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.86rem;
            margin: 10px 0 16px;
        }
        th {
            background: #f1f5f9;
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
            text-align: center;
            font-weight: 600;
            color: #475569;
        }
        td {
            padding: 8px 10px;
            border: 1px solid #e2e8f0;
        }
        tr:nth-child(even) { background: #f9fafb; }

        .badge {
            display: inline-block;
            padding: 2px 10px;
            border-radius: 10px;
            font-size: 0.78rem;
            font-weight: 600;
        }
        .badge-ok { background: #dcfce7; color: #166534; }
        .badge-fix { background: #fef3c7; color: #92400e; }
        .badge-err { background: #fee2e2; color: #991b1b; }

        .highlight-box {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 16px 20px;
            margin: 14px 0;
            font-size: 0.9rem;
        }
        .highlight-box.blue {
            background: #f0f9ff;
            border-color: #bae6fd;
        }

        .timeline {
            position: relative;
            padding-left: 28px;
            margin: 10px 0 16px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 4px;
            bottom: 4px;
            width: 2px;
            background: #cbd5e1;
        }
        .timeline-item {
            position: relative;
            padding: 5px 0 10px;
            font-size: 0.86rem;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 9px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #2563eb;
            border: 2px solid #fff;
            box-shadow: 0 0 0 2px #2563eb;
        }
        .timeline-item.done::before { background: #16a34a; box-shadow: 0 0 0 2px #16a34a; }
        .timeline-item .date { color: #94a3b8; font-size: 0.78rem; }
        .timeline-item .desc { color: #1e293b; }
        .timeline-item .commits { color: #94a3b8; font-size: 0.76rem; margin-top: 2px; }

        .attachment-list {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 14px 18px;
            margin: 10px 0;
        }
        .attachment-list li {
            margin: 6px 0;
            font-size: 0.88rem;
            list-style: none;
            padding-left: 22px;
            position: relative;
        }
        .attachment-list li::before {
            content: '\1F4CE';
            position: absolute;
            left: 0;
            font-size: 0.82rem;
        }

        .footer {
            padding: 18px 28px;
            background: #f8fafc;
            border-top: 1px solid #eef0f5;
        }
        .footer .name { font-size: 0.92rem; font-weight: 700; color: #1a2030; }
        .footer .company { font-size: 0.82rem; color: #94a3b8; margin-top: 3px; }

        .plan-diagram {
            background: #1a2030;
            border-radius: 8px;
            padding: 16px 20px;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.82rem;
            color: #e2e8f0;
            line-height: 1.7;
            margin: 12px 0;
        }
        .plan-diagram .blue { color: #93c5fd; }
        .plan-diagram .green { color: #86efac; }
        .plan-diagram .yellow { color: #fde68a; }
        .plan-diagram .red { color: #fca5a5; }
        .plan-diagram .dim { color: #64748b; }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <h1>S25016 B라인 자동용접 로봇 시스템</h1>
        <div class="meta">PlanB RAPID 수정 진행경과 보고 (2026.02.13)</div>
    </div>

    <!-- Mail Info -->
    <div class="mail-info">
        <div><label>수신</label> 삼성중공업 담당자님</div>
        <div><label>참조</label> 우리웰텍, 디파인시스템</div>
        <div><label>발신</label> 심태양 / 에스피시스템스</div>
        <div><label>일자</label> 2026년 2월 13일</div>
    </div>

    <!-- Content -->
    <div class="content">

        <!-- Greeting -->
        <div class="greeting">
            안녕하십니까, 에스피시스템스 심태양입니다.<br>
            S25016 B라인 자동용접 로봇 시스템의 <b>PlanB RAPID 프로그램 수정 진행경과</b>를 보고드립니다.
        </div>

        <!-- Section 1: Background -->
        <div class="section">
            <div class="section-title warn">1. 배경 및 경과</div>

            <p style="margin-bottom:12px;">
                당초 ABB Korea와 공동으로 PlanB 전환 작업을 진행하고자 하였으나,
                ABB 측 <b>핵심 엔지니어 이탈</b> 및 삼성중공업 내 <b>현업 진행 프로젝트 과제 해결에 집중</b>하면서
                PlanB 관련 작업이 지연되었습니다. 이 점 양해 부탁드립니다.
            </p>

            <p style="margin-bottom:14px;">
                현재 프로젝트의 Plan 구성 및 전환 배경은 아래와 같습니다.
            </p>

            <table>
                <tr>
                    <th style="width:80px;">구분</th>
                    <th style="text-align:left;">구성</th>
                    <th style="text-align:left;">현황</th>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">PlanA</td>
                    <td>10태스크 (로봇1 + 로봇2 + 갠트리 분리)</td>
                    <td><b>돌림부 품질이슈</b>가 기술적으로 해결이 어려워 현업 적용 보류</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;color:#16a34a;">PlanC</td>
                    <td>현업 적용 구성 (현장 운영 중)</td>
                    <td>돌림부 이슈 대응으로 <b>현업에 적용하여 운영 중</b>, 문제점 도출 및 개선 진행 중</td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;color:#2563eb;">PlanB</td>
                    <td>8태스크 (로봇1 + 갠트리 통합)</td>
                    <td>로봇 1대와 갠트리가 <b>완전히 하나의 로봇으로 구성</b>되어 장기적으로 유리한 대안</td>
                </tr>
            </table>

            <div class="highlight-box blue">
                <b>PlanB 팔로업 사유:</b>
                PlanB는 로봇과 갠트리가 하나의 Mechanical Unit Group으로 통합되어 있어
                좌표 변환이 단순하고, 동기화 이슈가 적으며,
                장기적으로 <b>유지보수성과 안정성</b> 면에서 가장 좋은 대안으로 판단되어
                지속적으로 팔로업해 왔습니다.
            </div>

            <p style="margin-bottom:12px;">
                이번 작업에서는 PlanA 기준으로 작성된 RAPID 코드를 PlanB 하드웨어 구성에 맞게 전수 수정하고,
                <b>상위 시스템(UI) 연동을 통한 실제 동작 검증</b>까지 시도하여 <b>주요 동작의 정상 구동을 확인</b>하였습니다.
            </p>

            <div class="highlight-box">
                <b>핵심 성과:</b> UI → T_Head → TASK1/TASK2 간 명령 프로토콜을 PlanB에 맞게 전수 수정하여,
                <b>갠트리 이동 및 Robot1+Robot2 홈이동이 정상 동작</b>하는 것을 확인하였습니다.
                이는 향후 용접 시퀀스 진행을 위한 <b>큰 산을 넘은 것</b>으로 판단됩니다.
            </div>
        </div>

        <!-- Section 2: Issues Resolved -->
        <div class="section">
            <div class="section-title success">2. 해결한 주요 문제점</div>

            <table>
                <tr>
                    <th style="width:28px;">#</th>
                    <th style="text-align:left;">문제</th>
                    <th style="text-align:left;">원인</th>
                    <th style="width:60px;">상태</th>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">1</td>
                    <td>
                        <b>T_Gantry 미존재 에러</b><br>
                        <span style="color:#64748b;font-size:0.8rem;">갠트리 이동 명령 시 Error 41634, 15분 타임아웃</span>
                    </td>
                    <td style="font-size:0.84rem;">PlanB에서 T_Gantry 제거되었으나 T_Head에 PlanA 참조 15곳 잔존</td>
                    <td style="text-align:center;"><span class="badge badge-ok">해결</span></td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">2</td>
                    <td>
                        <b>갠트리 이동 미동작</b><br>
                        <span style="color:#64748b;font-size:0.8rem;">MoveIncGantry 0.7초 완료 (실제 이동 없음)</span>
                    </td>
                    <td style="font-size:0.84rem;">TASK1에 MoveJgJ 핸들러 없음 - 빈 응답 전송</td>
                    <td style="text-align:center;"><span class="badge badge-ok">해결</span></td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">3</td>
                    <td>
                        <b>MoveToZHome 데드락</b><br>
                        <span style="color:#64748b;font-size:0.8rem;">로봇 홈이동 명령 시 무한 대기</span>
                    </td>
                    <td style="font-size:0.84rem;">"checkpos" 비표준 응답("checkposok") 핸들러 미구현</td>
                    <td style="text-align:center;"><span class="badge badge-ok">해결</span></td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">4</td>
                    <td>
                        <b>Robot2 홈이동 미동작</b><br>
                        <span style="color:#64748b;font-size:0.8rem;">Robot1만 이동, Robot2 제자리</span>
                    </td>
                    <td style="font-size:0.84rem;">TASK2에 MoveJgJ/MovePgJ/MovePgL 핸들러 없음</td>
                    <td style="text-align:center;"><span class="badge badge-ok">해결</span></td>
                </tr>
                <tr>
                    <td style="text-align:center;font-weight:700;">5</td>
                    <td>
                        <b>R2 TCP 좌표 오류</b><br>
                        <span style="color:#64748b;font-size:0.8rem;">R2 Z좌표 1360mm 오차</span>
                    </td>
                    <td style="font-size:0.84rem;">CalcCurrentTcp 갠트리 좌표 변환 누락</td>
                    <td style="text-align:center;"><span class="badge badge-ok">해결</span></td>
                </tr>
            </table>
        </div>

        <!-- Section 3: Full Timeline -->
        <div class="section">
            <div class="section-title">3. 전체 개발 진행 경과</div>
            <p style="margin-bottom:10px;font-size:0.88rem;color:#64748b;">
                Git 이력 기준 총 <b>240+ 커밋</b>, 약 3개월간의 개발 과정입니다.
            </p>

            <div class="timeline">
                <div class="timeline-item done">
                    <div class="date">12월 중순 (25년)</div>
                    <div class="desc">PlanB 좌표계 기초 분석 및 검증</div>
                    <div class="commits">wobj0 정의, Floor 좌표계, Robot Base 좌표 변환 검증 (v1.0~v1.4)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">12월 말 ~ 1월 초</div>
                    <div class="desc">갠트리 4축 제어 및 Linked Motor 동기화</div>
                    <div class="commits">X1/X2 Master-Follower 동기, 갠트리 HOME 이동, eax_f 동기화 (v1.5~v1.7)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">1월 중순</div>
                    <div class="desc">R축 회전 검증 및 동적 WObj 구현</div>
                    <div class="commits">WobjGantry 동적 생성, Robot2 Floor TCP 산출공식 구현 (v1.7.49~v1.8.5)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">1월 말</div>
                    <div class="desc">Mode2 오프셋 검증 및 Config 모듈 분리</div>
                    <div class="commits">config.txt 파싱, PERS 변수 전환, VersionModule 신설 (v1.8.6~v1.8.77)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2월 초</div>
                    <div class="desc">용접 시퀀스 개발 (EdgeWeld, WeldCorr, Multi-pass)</div>
                    <div class="commits">TP 메뉴, 토치 각도, 아크 파라미터, Robot2 동기 용접 (v1.9.3~v1.9.38)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2/8 (토)</div>
                    <div class="desc"><b>PlanA-PlanB 변수 통합</b> (v1.9.40)</div>
                    <div class="commits">T_Head 통합, stReact{3} 확장, 50+ PERS 변수 신설, RECORD 정의</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2/11 (화)</div>
                    <div class="desc">UI 연동 오류 수정 - RAPID 심볼 9개 누락 해결</div>
                    <div class="commits">VersionModule 유니코드 제거, Static.mod MU명 수정</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2/12 (수)</div>
                    <div class="desc">TCP 좌표 수정 (R2 Z좌표 1360mm 오차 해결)</div>
                    <div class="commits">CalcCurrentTcp 갠트리 좌표 변환 복원, 진단 변수 추가</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2/13 (목) 새벽</div>
                    <div class="desc">T_Gantry 참조 전수 수정 (15곳) + MoveJgJ 핸들러</div>
                    <div class="commits">T_Head CJointT("T_Gantry") 전수 교체, TASK1 모션 핸들러 구현 (v1.9.41)</div>
                </div>
                <div class="timeline-item done">
                    <div class="date">2/13 (목) 새벽</div>
                    <div class="desc"><b>checkpos 안전체크 + TASK2 모션 핸들러 구현 (v1.9.42)</b></div>
                    <div class="commits">MoveToZHome 데드락 해결, Robot1+Robot2 동시 홈이동 성공 확인</div>
                </div>
            </div>
        </div>

        <!-- Section 4: Verification -->
        <div class="section">
            <div class="section-title success">4. 동작 검증 결과</div>
            <table>
                <tr>
                    <th style="text-align:left;">검증 항목</th>
                    <th>수정 전</th>
                    <th>수정 후</th>
                    <th style="width:60px;">결과</th>
                </tr>
                <tr>
                    <td><b>갠트리 증분이동</b> (MoveIncGantry)</td>
                    <td style="text-align:center;color:#dc2626;">0.7초 즉시 완료<br><span style="font-size:0.8rem;">(이동 없음)</span></td>
                    <td style="text-align:center;color:#16a34a;">3~8초 실제 이동<br><span style="font-size:0.8rem;">(8회 연속 성공)</span></td>
                    <td style="text-align:center;"><span class="badge badge-ok">PASS</span></td>
                </tr>
                <tr>
                    <td><b>로봇 홈이동</b> (MoveToZHome)</td>
                    <td style="text-align:center;color:#dc2626;">무한 대기<br><span style="font-size:0.8rem;">(데드락)</span></td>
                    <td style="text-align:center;color:#16a34a;">12초 완료<br><span style="font-size:0.8rem;">(R1+R2 동시)</span></td>
                    <td style="text-align:center;"><span class="badge badge-ok">PASS</span></td>
                </tr>
                <tr>
                    <td><b>R2 TCP 좌표</b></td>
                    <td style="text-align:center;color:#dc2626;">Z=2780<br><span style="font-size:0.8rem;">(1360mm 오차)</span></td>
                    <td style="text-align:center;color:#16a34a;">Z=1420<br><span style="font-size:0.8rem;">(0.43mm 오차)</span></td>
                    <td style="text-align:center;"><span class="badge badge-ok">PASS</span></td>
                </tr>
                <tr>
                    <td><b>Check Program</b> (5개 태스크)</td>
                    <td style="text-align:center;color:#94a3b8;">-</td>
                    <td style="text-align:center;color:#16a34a;">All No errors</td>
                    <td style="text-align:center;"><span class="badge badge-ok">PASS</span></td>
                </tr>
            </table>
        </div>

        <!-- Section 5: Plan -->
        <div class="section">
            <div class="section-title plan">5. 향후 계획</div>
            <p style="margin-bottom:12px;">
                현재 야드에는 PlanA+PlanC가 적용되어 운영 중이며,
                PlanB는 시뮬레이션 검증을 거쳐 <b>단계적으로 빌드업</b>할 계획입니다.
            </p>
            <p style="margin-bottom:14px;">
                <b>설 연휴 기간</b>에는 RobotStudio 시뮬레이션으로 빌드업 가능한 항목들을 집중 진행하고,
                이후 시뮬레이션만으로는 검증이 어려운 항목(아크 발생, 실제 용접 파라미터 등)은
                <b>어곡 과제 갠트리를 활용</b>하여 실기 검증을 진행할 계획입니다.
            </p>
            <div class="highlight-box blue">
                <b>참고:</b> 어곡 과제 갠트리는 2월 11일 <b>아크 발생 테스트까지 완료</b>된 상태이므로,
                연휴 이후 용접 시퀀스 실기 검증에 바로 활용 가능합니다.
            </div>
            <table>
                <tr>
                    <th style="width:28px;">#</th>
                    <th style="text-align:left;">항목</th>
                    <th style="width:100px;">검증 환경</th>
                    <th style="width:70px;">우선순위</th>
                </tr>
                <tr>
                    <td style="text-align:center;">1</td>
                    <td>용접 시퀀스 핸들러 연동 (EdgeWeld, Weld, WeldCorr)</td>
                    <td style="text-align:center;font-size:0.82rem;">RobotStudio + 어곡</td>
                    <td style="text-align:center;color:#dc2626;font-weight:600;">높음</td>
                </tr>
                <tr>
                    <td style="text-align:center;">2</td>
                    <td>CorrSearchStartEnd 보정탐색 핸들러 구현</td>
                    <td style="text-align:center;font-size:0.82rem;">RobotStudio</td>
                    <td style="text-align:center;color:#dc2626;font-weight:600;">높음</td>
                </tr>
                <tr>
                    <td style="text-align:center;">3</td>
                    <td>WireCut 변형 핸들러 완성 (Rob1/Rob2 구분)</td>
                    <td style="text-align:center;font-size:0.82rem;">RobotStudio</td>
                    <td style="text-align:center;color:#f59e0b;font-weight:600;">중간</td>
                </tr>
                <tr>
                    <td style="text-align:center;">4</td>
                    <td>Robot1-Robot2 동기화 이동 정밀도 검증</td>
                    <td style="text-align:center;font-size:0.82rem;">어곡 갠트리</td>
                    <td style="text-align:center;color:#f59e0b;font-weight:600;">중간</td>
                </tr>
                <tr>
                    <td style="text-align:center;">5</td>
                    <td>아크 발생 실증 및 용접 파라미터 튜닝</td>
                    <td style="text-align:center;font-size:0.82rem;">어곡 갠트리</td>
                    <td style="text-align:center;color:#dc2626;font-weight:600;">높음</td>
                </tr>
                <tr>
                    <td style="text-align:center;">6</td>
                    <td>야드(거제) 실기 적용 및 동작 확인</td>
                    <td style="text-align:center;font-size:0.82rem;">거제 현장</td>
                    <td style="text-align:center;color:#dc2626;font-weight:600;">높음</td>
                </tr>
            </table>
        </div>

        <!-- Section 6: Attachments -->
        <div class="section">
            <div class="section-title">6. 첨부파일</div>
            <ul class="attachment-list">
                <li><b>동작 확인 동영상</b> - MoveToZHome(Robot1+Robot2 홈이동) 및 갠트리 이동 영상</li>
                <li><b>RAPID 백업 파일</b> - SpGantry_1200_526406_BACKUP (v1.9.42)</li>
                <li><b>로컬 UI 화면</b> - 상위 시스템 UI 연동 동작 캡처</li>
            </ul>
            <div style="background:#fffbeb;border:1px solid #fde68a;border-radius:8px;padding:12px 16px;font-size:0.85rem;color:#92400e;margin-top:10px;">
                <b>참고:</b> RobotStudio Pack&Go 파일은 라이센스 문제로 <b>금일 주간 업무시간에 별도 발송</b> 예정입니다.
            </div>
        </div>

        <!-- Closing -->
        <div style="margin-top:24px;padding-top:16px;border-top:1px solid #e5e7eb;">
            <p>
                ABB Korea와 공동 진행이 어려워진 상황에서 자체적으로 PlanB RAPID 코드를 분석하고
                문제점을 하나씩 해결하여 <b>UI 연동을 통한 실제 동작 검증</b>까지 도달하였습니다.
                3개월간 240건 이상의 수정을 거쳐 좌표계, 갠트리 제어, 용접 시퀀스의 기반이 구축되었습니다.
            </p>
            <p style="margin-top:10px;">
                연휴 기간 시뮬레이션과 어곡 갠트리를 병행 활용하여 빌드업을 지속하고,
                현재 성과를 기반으로 용접 시운전 목표를 달성할 수 있도록 하겠습니다.<br>
                문의사항이 있으시면 말씀 부탁드립니다.
            </p>
            <p style="margin-top:12px;">감사합니다.</p>
        </div>

    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="name">심태양 / 에스피시스템스</div>
        <div class="company">S25016 삼성중공업 거제조선소 34bay 자동용접 로봇 시스템</div>
    </div>

</div>
</body>
</html>
