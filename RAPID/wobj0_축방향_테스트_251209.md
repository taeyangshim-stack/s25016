# wobj0 Axis Direction Test

**작성일**: 2025-12-09 20:30
**프로젝트**: S25016 SpGantry 1200
**버전**: v1.0_251209

---

## 🎯 테스트 목적

wobj0 좌표계의 **축 방향**을 확인합니다.

### 이미 확인된 사항
- ✅ wobj0 **위치**: R축 센터 (X ≈ 45mm at Zero position)
- ✅ wobj0 **원점**: GantryRob (Gantry Robot) 중심

### 확인 필요 사항
- ⏳ wobj0 **축 방향**: X+, Y+, Z+ 각각이 물리적으로 어느 방향인가?

---

## 📊 진단 결과 요약

### DiagnosticWobj0 실행 결과

**Home Position** [0, -45, 0, 0, -45, 0]:
```
wobj0:
  X = -515.581 mm
  Y = -0.004 mm
  Z = 1146.486 mm

Orientation: [1.000, 0.000, -0.000, 0.000]
```

**Zero Position** [0, 0, 0, 0, 0, 0]:
```
wobj0:
  X = 44.997 mm
  Y = -0.002 mm
  Z = 889.100 mm

Orientation: [0.707, 0.000, 0.707, 0.000]  ← 90° rotation!
```

### 발견된 회전
Zero 위치에서 quaternion [0.707, 0, 0.707, 0]은 **Z축 기준 90도 회전**을 의미합니다.

이것이 wobj0 축 방향과 관련이 있는지 확인이 필요합니다.

---

## 🧪 축 방향 테스트 절차

### 테스트 모듈
**파일**: `TestWobj0Axes.mod`
**위치**: `TASK1/PROGMOD/`
**프로시저**: `TestWobj0AxisDirections()`

### 테스트 순서

1. **홈 위치로 이동** [0, -45, 0, 0, -45, 0]
2. **시작 위치 기록** (wobj0 좌표)
3. **X축 테스트**: wobj0 X + 100mm 이동
   - 로봇이 물리적으로 어느 방향으로 움직이는지 관찰
   - (앞/뒤/좌/우/위/아래)
4. **홈으로 복귀**
5. **Y축 테스트**: wobj0 Y + 100mm 이동
   - 로봇이 물리적으로 어느 방향으로 움직이는지 관찰
6. **홈으로 복귀**
7. **Z축 테스트**: wobj0 Z + 100mm 이동
   - 로봇이 물리적으로 어느 방향으로 움직이는지 관찰
8. **홈으로 복귀**

### 실행 방법
```rapid
! TASK1에서 실행
TestWobj0AxisDirections;
```

### 출력 파일
```
HOME:/wobj0_axis_test.txt
```

---

## 📋 예상되는 결과

### Case 1: wobj0가 표준 좌표계인 경우
```
X+ : Forward  (로봇 베이스로부터 앞으로)
Y+ : Left     (로봇의 좌측)
Z+ : Up       (수직 위로)
```

### Case 2: wobj0가 Z축 90도 회전된 경우
```
X+ : Left     (로봇의 좌측)
Y+ : Backward (로봇 베이스 쪽으로)
Z+ : Up       (수직 위로)
```

### Case 3: 기타 회전
```
사용자가 관찰한 실제 방향을 기록
```

---

## 📝 관찰 기록 양식

테스트 실행 후 `HOME:/wobj0_axis_test.txt` 파일에 다음 양식으로 기록됩니다:

```
========================================
wobj0 Axis Direction Test
========================================

Date: 2025-12-09
Time: HH:MM:SS

Start Position (wobj0):
  X = -515.581 mm
  Y = -0.004 mm
  Z = 1146.486 mm

========================================
Test Results - Record your observations:
========================================

Test 1: wobj0 X + 100mm
  Target: [-415.581, -0.004, 1146.486]
  Physical direction observed: _____________
  (Forward/Backward/Left/Right/Up/Down)

Test 2: wobj0 Y + 100mm
  Target: [-515.581, 99.996, 1146.486]
  Physical direction observed: _____________

Test 3: wobj0 Z + 100mm
  Target: [-515.581, -0.004, 1246.486]
  Physical direction observed: _____________

========================================
Expected for standard coordinate system:
========================================
  X+: Forward (away from robot base)
  Y+: Left (robot's left side)
  Z+: Up (vertical upward)

If wobj0 has 90 deg Z rotation:
  X+: Left
  Y+: Backward
  Z+: Up

========================================
```

---

## 🔍 좌표 변환 공식 (테스트 후 결정)

### 현재까지 확인된 것
```
Robot1 Base 원점 = wobj0 + [488, 0, 0]
Robot2 Base 원점 = wobj0 - [488, 0, 0]
```

### 축 방향 확인 후 결정할 것
테스트 결과에 따라 좌표 변환 시 회전 보정이 필요할 수 있습니다.

**예시**: wobj0가 90도 회전된 경우
```rapid
! Base → wobj0 변환 (90도 회전 보정)
wobj0_x = -base_y - 488;  ! 90도 회전 + offset
wobj0_y = base_x;
wobj0_z = base_z;
```

---

## ⚠️ 주의사항

1. **안전한 관찰 거리 유지**
   - 로봇이 움직이는 동안 안전 거리 확보
   - 비상정지 버튼 위치 확인

2. **움직임 관찰 포인트**
   - 각 축마다 100mm만 이동하므로 주의 깊게 관찰
   - 여러 번 실행해도 무방

3. **기록의 정확성**
   - 관찰한 방향을 정확히 기록
   - 필요시 비디오 촬영 권장

---

## 🎯 테스트 후 다음 단계

### 1단계: 축 방향 확인 ← **현재 위치**
- TestWobj0AxisDirections 실행
- 물리적 움직임 관찰 및 기록

### 2단계: 좌표 변환 공식 확정
- 축 방향 결과를 바탕으로 변환 공식 작성
- Robot Base [188, 0, 1100] → wobj0 변환 구현

### 3단계: 최종 검증
- ComprehensiveTCPCheck 수정
- Robot Base 좌표로 정확히 이동하는지 확인

### 4단계: 파일 정리
- 불필요한 테스트 mod 파일 정리
- 최종 버전만 유지

---

## 📁 관련 파일

```
✅ TestWobj0Axes.mod              - 축 방향 테스트 모듈
✅ DiagnosticWobj0.mod            - wobj0 진단 모듈
✅ wobj0_diagnostic.txt           - 진단 결과 (HOME:/)
⏳ wobj0_axis_test.txt            - 축 방향 테스트 결과 (HOME:/) - 실행 후 생성됨
```

---

## 📞 문의

**담당**: SP 심태양
**프로젝트**: S25016 SpGantry 1200
**위치**: 34bay 자동용접 A라인/B라인

---

**작성 완료**: 2025-12-09 20:30
**상태**: ⏳ 테스트 준비 완료, 실행 대기 중
**다음**: 사용자가 TestWobj0AxisDirections 실행 및 관찰 기록
