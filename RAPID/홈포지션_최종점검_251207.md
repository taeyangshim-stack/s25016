# 홈 포지션 변경 최종 점검

**작업일**: 2025-12-07
**작업자**: SP 심태양
**프로젝트**: S25016 SpGantry 1200

---

## ✅ 전체 수정 완료

### 새 홈 포지션

```
[0, -45, 0, 0, -45, 0]

로봇1축: 0°
로봇2축: -45° ⬅️ 변경
로봇3축: 0°
로봇4축: 0°
로봇5축: -45° ⬅️ 변경
로봇6축: 0°
```

---

## 📋 수정된 파일 전체 목록 (4개)

### TASK1 (Robot1) - 2개 파일

#### 1. HomePositionTest.mod ✅
**파일**: `RAPID/TASK1/PROGMOD/HomePositionTest.mod`

**수정 내용**:
- Line 9: 설명 `[0,0,0,0,-90,0]` → `[0,-45,0,0,-45,0]`
- Line 35: TP 출력 `[0, 0, 0, 0, -90, 0]` → `[0, -45, 0, 0, -45, 0]`
- Line 36: MoveAbsJ `[[0,0,0,0,-90,0],...]` → `[[0,-45,0,0,-45,0],...]`
- Line 38: 간섭 회피 노트 추가
- Line 93: 출력 파일 Target `[0, 0, 0, 0, -90, 0]` → `[0, -45, 0, 0, -45, 0]`
- Line 94: 간섭 회피 노트 추가

**사용 도구**: tool0

---

#### 2. MonitorFloorCoordinates.mod ✅
**파일**: `RAPID/TASK1/PROGMOD/MonitorFloorCoordinates.mod`

**수정 내용**:
- Line 173: MoveAbsJ `[[0, 0, 0, 0, -90, 0],...]` → `[[0, -45, 0, 0, -45, 0],...]`
- Line 408: 출력 파일 `[0, 0, 0, 0, -90, 0]` → `[0, -45, 0, 0, -45, 0]`
- Line 409: 간섭 회피 노트 추가

**사용 도구**: tWeld1

---

### TASK2 (Robot2) - 2개 파일

#### 3. HomePositionTest.mod ✅
**파일**: `RAPID/TASK2/PROGMOD/HomePositionTest.mod`

**버전**: v1.0_251205 → **v1.1_251207**

**수정 내용**:
- Line 4: Version `v1.0_251205` → `v1.1_251207`
- Line 8: Last Modified `2025-12-05` → `2025-12-07`
- Line 11: 설명 `[0,0,0,0,-90,0]` → `[0,-45,0,0,-45,0]`
- Line 17-19: 변경 이력 추가 (v1.1_251207)
- Line 41: TP 출력 `[0, 0, 0, 0, -90, 0]` → `[0, -45, 0, 0, -45, 0]`
- Line 42: MoveAbsJ `[[0,0,0,0,-90,0],...]` → `[[0,-45,0,0,-45,0],...]`
- Line 45: 간섭 회피 노트 추가

**사용 도구**: tWeld2

---

#### 4. FloorMonitor_Task2.mod ✅
**파일**: `RAPID/TASK2/PROGMOD/FloorMonitor_Task2.mod`

**버전**: v1.1_251205 (유지)

**수정 내용**:
- Line 143: 출력 파일 `[0, 0, 0, 0, -90, 0]` → `[0, -45, 0, 0, -45, 0]`
- Line 144: 간섭 회피 노트 추가

**사용 도구**: tWeld2 또는 tWeldTest2

---

## 🔍 전체 검증 체크리스트

### TASK1 (Robot1) 파일 확인

```
✅ HomePositionTest.mod
   ✅ Line 9: 설명 [0,-45,0,0,-45,0]
   ✅ Line 35: TP 출력 [0, -45, 0, 0, -45, 0]
   ✅ Line 36: MoveAbsJ [[0,-45,0,0,-45,0],...]
   ✅ Line 93: 출력 파일 [0, -45, 0, 0, -45, 0]

✅ MonitorFloorCoordinates.mod
   ✅ Line 173: MoveAbsJ [[0, -45, 0, 0, -45, 0],...]
   ✅ Line 408: 출력 파일 [0, -45, 0, 0, -45, 0]
```

### TASK2 (Robot2) 파일 확인

```
✅ HomePositionTest.mod
   ✅ Version: v1.1_251207
   ✅ Line 11: 설명 [0,-45,0,0,-45,0]
   ✅ Line 41: TP 출력 [0, -45, 0, 0, -45, 0]
   ✅ Line 42: MoveAbsJ [[0,-45,0,0,-45,0],...]

✅ FloorMonitor_Task2.mod
   ✅ Line 143: 출력 파일 [0, -45, 0, 0, -45, 0]
```

---

## 📊 수정 요약

| 파일 | 위치 | 수정 위치 | 개수 | 버전 변경 |
|------|------|----------|------|----------|
| HomePositionTest.mod | TASK1 | 5곳 | 5 | - |
| MonitorFloorCoordinates.mod | TASK1 | 2곳 | 2 | - |
| HomePositionTest.mod | TASK2 | 6곳 | 6 | v1.1_251207 |
| FloorMonitor_Task2.mod | TASK2 | 2곳 | 2 | - |
| **합계** | - | **15곳** | **15** | **1개** |

---

## 🚀 다음 실행 단계

### RobotStudio 테스트 순서

#### 1. Robot1 (TASK1) 테스트

```rapid
1. TASK1 선택
2. PP to Main
3. % MoveToHomeAndCheckTCP
4. TP 확인:
   "Joint angles: [0, -45, 0, 0, -45, 0]"
   "Note: Changed from [0,0,0,0,-90,0] to avoid interference"
5. 홈 위치 도달 확인
6. 결과 파일:
   HOME:/home_position_test_robot1.txt
```

---

#### 2. Robot2 (TASK2) 테스트

```rapid
1. TASK2 선택
2. PP to Main
3. % MoveToHomeAndCheckTCP
4. TP 확인:
   "Joint angles: [0, -45, 0, 0, -45, 0]"
   "Note: Changed from [0,0,0,0,-90,0] to avoid interference"
5. 홈 위치 도달 확인
6. 결과 파일:
   HOME:/home_position_test_robot2.txt
```

---

#### 3. 간섭 확인 (중요!)

```
□ Robot1 단독 홈 이동 확인
□ Robot2 단독 홈 이동 확인
□ 양 로봇 동시 홈 위치 확인
□ 로봇 간 최소 거리 측정
□ 간섭 없음 확인
```

---

#### 4. WobjFloor 측정 (TASK2)

```rapid
1. TASK2 선택
2. PP to Main
3. % MonitorFloorAtHome_Task2 \UseTestTCP
4. 결과 확인:
   - Home Position: [0, -45, 0, 0, -45, 0]
   - TCP 오프셋: 300mm 확인
5. 결과 파일:
   HOME:/floor_coordinates_at_home_task2.txt
```

---

## 📝 예상 결과

### HOME:/home_position_test_robot1.txt

```
========================================
Robot1 - Home Position TCP Test
========================================

Date: 2025-12-07
Time: HH:MM:SS
========================================

Home Position (Joint angles):
  Target: [0, -45, 0, 0, -45, 0]
  Note: Changed to avoid robot interference
  Actual:
    J1 = 0.000 deg
    J2 = -45.000 deg
    J3 = 0.000 deg
    J4 = 0.000 deg
    J5 = -45.000 deg
    J6 = 0.000 deg

... (이하 TCP 정보)
```

---

### HOME:/home_position_test_robot2.txt

```
========================================
Robot2 - Home Position TCP Test
========================================

Date: 2025-12-07
Time: HH:MM:SS
========================================

Module Version: HomePositionTest v1.1 (2025-12-07)

Home Position (Joint angles):
  Target: [0, -45, 0, 0, -45, 0]
  Note: Changed to avoid robot interference
  Actual:
    J1 = 0.000 deg
    J2 = -45.000 deg
    J3 = 0.000 deg
    J4 = 0.000 deg
    J5 = -45.000 deg
    J6 = 0.000 deg

... (이하 TCP 정보)
```

---

### HOME:/floor_coordinates_at_home_task2.txt

```
========================================
Floor Coordinates at Home Position (TASK2)
========================================

Program Version: v1.1_251205
Module: FloorMonitor_Task2
Procedure: MonitorFloorAtHome_Task2

TCP Mode: TEST MODE
  TCP Offset: [300.00, 0, 300.00] mm

Date: 2025-12-07
Time: HH:MM:SS

Executed from: TASK2
Home Position: [0, -45, 0, 0, -45, 0]
  Note: Changed to avoid robot interference

... (이하 측정 정보)
```

---

## ⚠️ 중요 참고사항

### 1. 좌표값 변경됨

**이전 홈 [0,0,0,0,-90,0]의 좌표**:
```
Robot2 tool0 (WobjFloor): [9951.000, 5300.000, 1128.900]
```

**새 홈 [0,-45,0,0,-45,0]의 좌표**:
```
Robot2 tool0 (WobjFloor): ??? (재측정 필요)
```

⚠️ **절대 좌표값이 바뀌므로 이전 데이터와 직접 비교하지 마세요**

---

### 2. TCP 오프셋은 동일

**검증 방법**:
```
테스트 모드:
  tool0 X = A
  tWeldTest2 X = B
  차이 = B - A = 300 mm ✅

운영 모드:
  tool0 X = C
  tWeld2 X = D
  차이 = D - C = 319.99 mm ✅
```

**홈 포지션이 바뀌어도**:
- ✅ A와 C는 다를 수 있음 (절대 좌표)
- ✅ B-A는 항상 300mm (상대 오프셋)
- ✅ D-C는 항상 319.99mm (상대 오프셋)

---

### 3. 간섭 검증 필수

**시뮬레이션 단계**:
```
1. RobotStudio Simulation 모드
2. Robot1 홈 이동
3. Robot2 홈 이동
4. 양 로봇 동시 홈 확인
5. 최소 거리 100mm 이상 확인
```

**실제 로봇 단계** (시뮬레이션 후):
```
1. 저속 모드 (v10)
2. Robot1 단독 홈
3. Robot2 단독 홈
4. 양 로봇 저속 동시 홈
5. 간섭 없음 확인
6. 정상 속도 (v100)
```

---

## ✨ 최종 확인

### 모든 파일 수정 완료

```
✅ TASK1/PROGMOD/HomePositionTest.mod
✅ TASK1/PROGMOD/MonitorFloorCoordinates.mod
✅ TASK2/PROGMOD/HomePositionTest.mod (v1.1_251207)
✅ TASK2/PROGMOD/FloorMonitor_Task2.mod

총 4개 파일, 15곳 수정
```

### 새 홈 포지션

```
[0, -45, 0, 0, -45, 0]

축2: -45°
축5: -45°
```

### 다음 단계

```
□ RobotStudio에서 파일 재로드
□ Program Check
□ Robot1 홈 테스트
□ Robot2 홈 테스트
□ 간섭 확인
□ WobjFloor 측정
```

---

**작업 완료**: 2025-12-07
**상태**: ✅ 모든 RAPID 파일 수정 완료
**다음**: RobotStudio에서 간섭 검증 및 테스트
