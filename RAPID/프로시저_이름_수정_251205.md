# 프로시저 이름 길이 문제 해결

**문제 발생**: 2025-12-05 17:46
**수정 완료**: 2025-12-05
**프로젝트**: S25016 SpGantry 1200

---

## 🔴 발견된 문제

### Program Check 오류
```
SpGantry_1200_526406/RAPID/T_ROB2/FloorMonitor_Task2(27,7):
Identifier too long(148): The name of the identifier
MonitorBothTCP_Floor_AtHome_Task is too long.
```

### 원인
**ABB RAPID 식별자 최대 길이: 32자**

- ❌ 원래 이름: `MonitorBothTCP_Floor_AtHome_Task2` = **33자**
- ✅ 새 이름: `MonitorFloorAtHome_Task2` = **24자**

---

## ✅ 수정 내용

### 파일: FloorMonitor_Task2.mod

**변경 사항**:
```rapid
! 이전 (33자 - 오류)
PROC MonitorBothTCP_Floor_AtHome_Task2()

! 수정 (24자 - 정상)
PROC MonitorFloorAtHome_Task2()
```

**위치**: Line 28

---

## 📋 업데이트된 모듈 정보

### 버전 히스토리 업데이트
```rapid
! Change History:
! v1.0_251205 (2025-12-05) - Initial version with WobjFloor monitoring
!                          - Fixed: Renamed procedure (33→24 chars)
```

---

## 🎯 새 프로시저 사용법

### TASK2에서 실행

**이전 명령 (오류)**:
```rapid
%MonitorBothTCP_Floor_AtHome_Task2%  ❌ 너무 긴 이름
```

**새 명령 (정상)**:
```rapid
%MonitorFloorAtHome_Task2%  ✅ 24자
```

### RobotStudio에서

1. **Program Pointer 설정**:
   ```
   PP to Main
   → MonitorFloorAtHome_Task2 선택
   → Start
   ```

2. **또는 Production Window**:
   ```
   Procedure Routine 목록에서
   → MonitorFloorAtHome_Task2 선택
   → Run
   ```

---

## 🔧 RobotStudio 재로드 필요

### 단계:

1. **파일 복사 확인**:
   ```
   ✅ Linux에서 Windows로 복사 완료
   위치: C:\Users\user\Documents\RobotStudio\Projects\
         SP_Gatry20251120\Backups\
         SpGantry_1200_526406_BACKUP_2025-11-21\
   ```

2. **RobotStudio에서 재로드**:
   ```
   Controller 탭
   → RAPID > T_ROB2 > Program Modules
   → FloorMonitor_Task2 우클릭
   → Delete Module (기존 모듈 삭제)
   → Load Module... (새 파일 로드)
   ```

3. **Program Check 재실행**:
   ```
   Controller > Program Check
   → Check Program
   → T_ROB2: No errors 확인 ✅
   ```

---

## 📊 RAPID 식별자 길이 제한

### ABB RAPID 제약사항

| 항목 | 최대 길이 |
|------|-----------|
| 모듈명 (MODULE) | 32자 |
| 프로시저명 (PROC) | 32자 |
| 함수명 (FUNC) | 32자 |
| 변수명 (VAR) | 32자 |
| 상수명 (CONST) | 32자 |

### 권장 명명 규칙

**좋은 예** (32자 이내):
```rapid
MonitorFloorAtHome_Task2        (24자) ✅
CheckTCP_Floor_T2               (17자) ✅
GetBothRobotPositions           (21자) ✅
```

**나쁜 예** (32자 초과):
```rapid
MonitorBothTCP_Floor_AtHome_Task2    (33자) ❌
CheckBothRobotsFloorCoordinates      (35자) ❌
GetAllRobotTCPPositionsInFloor       (34자) ❌
```

---

## 🔍 관련 프로시저 확인

### 다른 프로시저 이름 길이

| 프로시저명 | 길이 | 상태 |
|-----------|------|------|
| MonitorFloorAtHome_Task2 | 24자 | ✅ |
| MonitorBothTCP_Floor_AtHome | 27자 | ✅ (TASK1) |
| MoveToHomeAndCheckTCP | 21자 | ✅ |
| TestFloorCoordinate | 19자 | ✅ |
| TestBothRobotsToSameFloorPoint | 30자 | ✅ |
| MonitorBothTCP_Floor | 20자 | ✅ |

---

## 📝 문서 업데이트 필요

### 업데이트할 문서 목록

1. **테스트 계획서**: `홈위치_WobjFloor_테스트_계획_251205.md`
   - 프로시저 이름 변경
   - 실행 명령 수정

2. **테스트 결과 분석**: `테스트_결과_분석_251205.md`
   - 프로시저 이름 업데이트

3. **로드 가이드**: `FloorMonitor_Task2_로드_가이드.md`
   - 새 프로시저 이름 반영

4. **버전 정보 완료**: `버전정보_추가_완료_251205.md`
   - 프로시저 이름 수정 사항 추가

---

## ✅ 수정 완료 체크리스트

- [x] 프로시저 이름 변경 (33자 → 24자)
- [x] 모듈 버전 히스토리 업데이트
- [x] Windows로 파일 복사
- [ ] RobotStudio에서 모듈 재로드
- [ ] Program Check 재실행 (오류 없음 확인)
- [ ] 프로시저 실행 테스트
- [ ] 문서 업데이트
- [ ] Git 커밋

---

## 🎯 다음 단계

### 즉시 실행

1. **RobotStudio 재로드**:
   - FloorMonitor_Task2 모듈 삭제 후 재로드

2. **Program Check**:
   ```
   T_ROB2: No errors 확인 ✅
   ```

3. **프로시저 실행**:
   ```rapid
   %MonitorFloorAtHome_Task2%
   ```

4. **결과 확인**:
   ```
   HOME:/floor_coordinates_at_home_task2.txt
   ```

---

## 💡 교훈

### ABB RAPID 프로그래밍 시 주의사항

1. **식별자 길이 제한**: 항상 32자 이내
2. **사전 검증**: 긴 이름 사용 시 미리 길이 확인
3. **명명 규칙**: 약어 사용 고려
   - `Task2` 대신 `T2`
   - `Monitor` 대신 `Mon`
   - `Coordinate` 대신 `Coord`

### 권장 접근

**개발 초기**:
- 프로시저 이름을 짧고 명확하게
- 주석으로 상세 설명 추가

**예시**:
```rapid
! Full name: Monitor Both Robots TCP in Floor Coordinates at Home - Task2
PROC MonitorFloorAtHome_T2()  ! 22자
```

---

## 📂 파일 위치

### 수정된 파일
```
Linux (Git):
/home/qwe/works/s25016/RAPID/
SpGantry_1200_526406_BACKUP_2025-11-21/RAPID/TASK2/PROGMOD/
FloorMonitor_Task2.mod

Windows (RobotStudio):
C:\Users\user\Documents\RobotStudio\Projects\
SP_Gatry20251120\Backups\
SpGantry_1200_526406_BACKUP_2025-11-21\RAPID\TASK2\PROGMOD\
FloorMonitor_Task2.mod
```

---

## 🔗 관련 문서

- `VERSION_CONTROL.md` - 버전 관리 가이드
- `CHANGELOG.md` - 변경 이력
- `홈위치_WobjFloor_테스트_계획_251205.md` - 테스트 계획
- `FloorMonitor_Task2_로드_가이드.md` - 모듈 로드 방법

---

**수정 완료**: 2025-12-05
**상태**: ✅ 즉시 사용 가능
**다음**: RobotStudio Program Check 재실행 필요
